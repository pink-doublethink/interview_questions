---
tags:
- Technology/BA
- Difficulty/Intermediate
---
----
## Как вы проектируете шардирование и маршрутизацию запросов
----
> [!FAQ]- Ответ
> - С точки зрения старшего технического бизнес-аналитика, проектирование шардинга и маршрутизации запросов начинается не с кода, а с тщательного определения нефункциональных требований (NFR) к масштабируемости, задержке и объему данных. Мой первый шаг — провести анализ объемов данных и прогнозирование роста, чтобы обосновать сложность распределенной архитектуры. Я взаимодействую с заинтересованными сторонами, чтобы количественно оценить ожидаемую пропускную способность (запросы в секунду) и потребности в хранении данных, обеспечивая четкое разграничение между рабочими нагрузками с преобладанием операций чтения и записи. Сбор этих данных необходим для определения того, действительно ли нам требуется горизонтальное масштабирование или достаточно вертикального, поскольку внедрение шардинга добавляет значительные операционные издержки, которые должны быть оправданы конкретными соглашениями об уровне обслуживания (SLA) и показателями производительности.
> - После подтверждения необходимости шардинга я содействую процессу принятия критически важных решений относительно «ключа шардинга», выступая в качестве связующего звена между бизнес-ограничениями и архитектурой системы. Я провожу с командой анализ компромиссов для выбора ключа — например, идентификатора клиента, даты заказа или географического региона — который соответствует нашим наиболее частым шаблонам запросов, избегая при этом «горячих точек», где один сегмент становится перегруженным. Например, если законы о защите данных (например, GDPR) являются бизнес-ограничением, мы должны использовать географическое шардирование, чтобы гарантировать, что данные остаются в пределах определенных юридических юрисдикций. Моя роль заключается в документировании этих бизнес-правил, чтобы выбранная стратегия сегментирования минимизировала дорогостоящие межсегментные соединения и поддерживала локализацию данных для конечного пользователя.
> - Наконец, что касается маршрутизации запросов, я определяю функциональные спецификации для уровня маршрутизации, чтобы гарантировать, что он действует как интеллектуальный диспетчер на основе установленной нами бизнес-логики. Я разрабатываю требования к службе конфигурации или таблице поиска, которую приложение использует для направления трафика в соответствующий физический сегмент без неудобств для клиента. Я также гарантирую, что логика маршрутизации включает требования к высокой доступности и стратегиям аварийного переключения; если сегмент выходит из строя, уровень маршрутизации должен корректно обрабатывать ошибки или перенаправлять запросы на реплику. В завершение цикла я определяю критерии приемочного тестирования пользователями (UAT), чтобы убедиться, что задержка маршрутизации остается в допустимых пределах и что система правильно перераспределяет данные по мере масштабирования бизнеса.