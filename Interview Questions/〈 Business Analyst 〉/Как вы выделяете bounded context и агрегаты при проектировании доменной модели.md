---
tags:
- Technology/BA
- Difficulty/Intermediate
---
----
## Как вы выделяете bounded context и агрегаты при проектировании доменной модели
----
> [!FAQ]- Ответ
> - Идентификация ограниченных контекстов начинается с тщательного анализа «повсеместно используемого языка» в различных функциональных областях бизнеса. Как бизнес-аналитик, я часто использую сеансы совместного моделирования, такие как Event Storming, для построения бизнес-процессов и выявления лингвистических границ, где определение ключевого термина меняется. Например, если отдел продаж определяет «клиента» как потенциального клиента с вероятностной оценкой, а отдел выполнения заказов определяет «клиента» исключительно как пункт доставки с платежным адресом, это семантическое расхождение указывает на существование двух разных ограниченных контекстов. Изолируя эти конкретные модели, я могу предотвратить создание монолитной, противоречивой доменной модели и вместо этого обеспечить, чтобы каждый контекст имел четкую, недвусмысленную границу, соответствующую конкретным бизнес-возможностям.
> - После определения стратегических границ я идентифицирую агрегаты, анализируя бизнес-инварианты и требования к транзакционной согласованности. Агрегат — это группа доменных объектов, которые должны рассматриваться как единое целое для обеспечения целостности данных при изменениях. Я ищу правила, где несколько сущностей должны обновляться атомарно; если удаление или изменение одного объекта требует немедленного обновления другого, чтобы предотвратить переход системы в недопустимое состояние, эти объекты принадлежат к одному агрегату. На этом этапе я также определяю корневой агрегат, который служит единственной точкой входа для внешнего взаимодействия, гарантируя строгое соблюдение правил внутренней согласованности и предотвращая прямое манипулирование зависимыми объектами внешними процессами.
> - Наконец, я проверяю дизайн, оценивая компромиссы между согласованностью и параллелизмом. Если я обнаруживаю, что агрегат становится слишком большим, потенциально вызывая проблемы с блокировкой базы данных или узкие места в производительности, я пересматриваю бизнес-правила, чтобы определить, действительно ли требуется строгая согласованность или допустима «конечная согласованность». В таких случаях я могу разделить агрегат и использовать доменные события для распространения изменений между ними. Такой подход позволяет мне создать доменную модель, которая не только концептуально точна с точки зрения бизнес-правил, но и технически масштабируема, гарантируя, что архитектура программного обеспечения останется устойчивой по мере роста сложности бизнеса.