---
tags:
- Technology/BA
- Difficulty/Intermediate
---
----
## Какие ресурсы потребляют индексы и когда вы отказываетесь от них
----
> [!FAQ]- Ответ
> - С точки зрения технического анализа, индексы потребляют три основных ресурса: дисковое пространство, оперативную память (RAM) и вычислительную мощность, связанную с пропускной способностью ввода-вывода. Физически индекс представляет собой отдельную структуру данных — обычно B-дерево или хеш-таблицу — которая требует отдельного места для хранения, отличного от самих данных таблицы; по мере роста объема данных дисковое пространство, занимаемое этими структурами, может стать значительным. Кроме того, для эффективного ускорения поиска данных система управления базами данных должна кэшировать страницы индекса в оперативной памяти (буферном пуле), что потребляет оперативную память, которая могла бы быть использована для обработки запросов или кэширования других данных. Что наиболее важно, индексы создают значительные накладные расходы на обработку данных при их изменении; для каждой команды INSERT, UPDATE или DELETE система должна записывать данные в таблицу, а затем одновременно обновлять все связанные индексы для поддержания целостности, что фактически многократно увеличивает затраты на операции записи.
> - Поэтому я предпочитаю не использовать индексы в сценариях с интенсивной записью данных, таких как высокоскоростные среды OLTP (оперативная обработка транзакций), поскольку задержка, вызванная поддержанием структур индексов, может нарушить нефункциональные требования к пропускной способности системы. Я также избегаю индексирования столбцов с низкой кардинальностью — полей с очень небольшим количеством уникальных значений, таких как «Пол» или «Статус», — поскольку оптимизатор запросов базы данных обычно определяет, что полное сканирование таблицы более эффективно, чем обход дерева индексов, что делает индекс избыточным. Наконец, для очень маленьких справочных таблиц накладные расходы на создание и поддержание индекса неоправданны, поскольку система управления базами данных часто может загрузить всю таблицу в память и просканировать ее быстрее, чем выполнить операции поиска, необходимые для индекса.