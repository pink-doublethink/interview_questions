---
tags:
- Technology/BA
- Difficulty/Intermediate
---
----
## По каким метрикам вы принимаете решение об индексации
----
> [!FAQ]- Ответ
> - При определении подходящей стратегии индексирования для базы данных я в первую очередь оцениваю кардинальность и избирательность данных в конкретных столбцах. Высокая избирательность относится к столбцам, содержащим большой процент уникальных значений, таких как идентификатор клиента или номер социального страхования, что делает их отличными кандидатами для стандартных B-деревьев индексов, поскольку механизм базы данных может изолировать определенные строки без сканирования всей таблицы. И наоборот, для столбцов с низкой кардинальностью — например, поле «статус» с всего тремя возможными значениями, такими как «Активный», «Ожидающий» или «Закрытый» — я осторожно отношусь к добавлению стандартных индексов, поскольку оптимизатор запросов может определить, что полное сканирование таблицы более эффективно, чем накладные расходы на обход структуры индекса, хотя в определенных контекстах хранилищ данных может быть уместен битовый индекс.
> - Помимо статистических характеристик данных, я тщательно анализирую соотношение операций чтения и записи, а также конкретные шаблоны использования запросов. Индексирование — это, по сути, компромисс: хотя оно значительно ускоряет извлечение данных (операции SELECT), оно накладывает штраф на производительность операций языка манипулирования данными (DML) — в частности, операторов INSERT, UPDATE и DELETE — поскольку система должна обновлять структуру индекса каждый раз, когда данные изменяются. Поэтому, если таблица сильно ориентирована на транзакции и интенсивно используется для записи, я проявляю осторожность, чтобы избежать проблем с блокировками и задержками. Однако для таблиц отчетов, где производительность чтения имеет первостепенное значение, я отдаю приоритет индексированию столбцов, которые часто встречаются в предложениях WHERE, предикатах JOIN и условиях сортировки ORDER BY, чтобы оптимизировать путь выполнения запроса.
> - Наконец, я использую планы выполнения запросов и статистику использования индексов, генерируемую системой, для эмпирической проверки этих решений. Я анализирую оценки стоимости в плане выполнения, чтобы увидеть, выполняет ли оптимизатор «поиск по индексу» (эффективно) или «сканирование таблицы» (неэффективно), и отслеживаю динамические представления управления для выявления рекомендаций по «отсутствующим индексам» или существующим индексам, которые редко используются. Этот постоянный анализ позволяет мне выполнять обслуживание индексов, удаляя неиспользуемые индексы, которые просто потребляют хранилище и вычислительную мощность, гарантируя, что схема базы данных остается оптимизированной для фактической рабочей нагрузки, а не для гипотетических требований. Такой подход гарантирует, что мы соблюдаем нефункциональные требования к производительности системы и времени отклика.